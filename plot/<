# --------------------- #
#  2D plotting function #
# --------------------- #
import numpy as np
from fun_gen import *
import sys
from glob import glob
import xarray as xr
import cartopy.crs as ccrs
import datetime as dt
import matplotlib.pyplot as plt
from cmcrameri import cm
import cmocean



# Get args
# --------
config=sys.argv[1]
var=sys.argv[2]


# Load parameters
# ---------------
try :
  load_config(config)
  from fun_gen import *
except Exception as e :
  print('Error in argument or config')
  print(e)
  exit()

vname, tag, cmap, islog, vmin, vmax = load_variable(config,var)


# Initialize plot
# ---------------
fname=glob(outdir+'/*.nc')[0]
ds=xr.open_dataset(fname)
lon=ds['longitude']
lat=ds['latitude']


fig, ax = plt.subplots(1,1,figsize=(fig_sx, fig_sy), subplot_kw={'projection': fig_proj})
ax.set_extent([lon.min(),lon.max(),lat.min(),lat.max()])

resol = '50m'
land = cartopy.feature.NaturalEarthFeature('physical', 'land', \
    scale=resol, edgecolor='k', facecolor=cfeature.COLORS['land'])

ax.add_feature(land, facecolor='lightgrey')



ax.add_feature(cfeature.BORDERS,edgecolor='darkgrey',zorder=2)
#ax.gridlines(draw_labels=True)
ax.coastlines(resolution=resol, color='darkgrey', linestyle='-', alpha=1)
gl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True,
linewidth=0.2, color='gray', alpha=1., linestyle='-')
gl.top_labels = True
gl.left_labels = True
gl.xlines = True
gl.ylines = True
gl.xformatter = LONGITUDE_FORMATTER
gl.yformatter = LATITUDE_FORMATTER
gl.xlabel_style = {'size': fig_tcklbl_size}
gl.ylabel_style = {'size': fig_tcklbl_size}


plt.show()
plt.close()


















